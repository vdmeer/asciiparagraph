
= ASCII Paragraph
:page-layout: base
:toc: preamble

:release-version: 0.0.3-SNAPSHOT

A simple tool to format paragraphs with indentation, indentation character, alignment, padding (left, right, both), padding characters (left, right, both), and in-line whitespace characters.

Resources
---------

[frame=topbot, grid=rows, cols="d,d"]
|===
| Releases on Maven Central
| https://search.maven.org/#artifactdetails\|de.vandermeer\|asciiparagraph\|{release-version}\|jar[current release {release-version}], 
  https://search.maven.org/#search\|gav\|1\|g%3A%22de.vandermeer%22%20AND%20a%3A%22asciiparagraph%22[all releases]

| UTF-8 Howto
| http://vdmeer-sven.blogspot.ie/2014/06/utf-8-support-w-java-and-console.html[older blog], 
  https://github.com/vdmeer/skb/wiki/HowTo-UTF-8-Support-in-Java-and-Console[updated SKB Wiki]
|===

== Installation

=== Maven

For Maven declare a dependency in the `<dependencies>` section of your POM file.

[source,xml,subs=attributes+]
.Dependency declaration in pom.xml
----
<dependency>
    <groupId>de.vandermeer</groupId>
    <artifactId>asciiparagraph</artifactId>
    <version>{release-version}</version>
</dependency>
----

For other build systems see https://search.maven.org/#artifactdetails\|de.vandermeer\|asciiparagraph\|{release-version}\|jar[Maven Central]

Features
--------
A paragraph offers some flexibility for rendering. Options are:

* Add text as string, collection of strings, using an object implementing HasText, or an object providing a method render
* Remove all additional whitespaces (tabulators, extra spaces, line feed, carriage return)
* Set the paragraphs alignment: justified, justified right (last line right bound) centered, left, or right
* Set width of text lines in the paragraph
* Set left padding (number of characters to print) as well as a specific character for left padding
* Set right padding (number of characters to print) as well as a specific character for right padding
* Set an indentation for the paragraph
* Set a string inserted at the beginning of each line
* Set a string appended at the end of each line
* Some extra methods to calculate paragraph width


Concepts
--------

The main concepts are: paragraph and paragraph context.

Paragraph
~~~~~~~~~
A paragraph is a collection of text strings.
The strings are processed as follows:

* add every string to the internal representation of all paragraph text, separated by a space
* when rendering the paragraph, remove all extra white spaces
  ** tabulators,
  ** more than one consecutive space,
  ** line feed,
  ** carriage return, and
  ** line feed and carriage return

Paragraphs can be created and filled with text.
Properties of paragraphs are set as paragraph context.
Finally, paragraphs are rendered, i.e. a printable representation of the paragraph and all its text is created.


Paragraph Context
~~~~~~~~~~~~~~~~~
Defines all possible properties of a paragraph:

* overall with of the paragraph
* left padding, left indentation
* right padding, right indentation
* left padding character, character used for left indentation
* right padding character, character used for right indentation
* character used for in-line white spaces
* added empty lines after the paragraph text
* paragraph alignment


Paragraph Renderer
~~~~~~~~~~~~~~~~~~

The paragraph itself provides a number of render methods to render the content into various object.
Supported are String, Iterables, Iterators, Collections, and arrays.

If more render functionality is required, one can create special renderes that take a paragraph and render it to the requirements.
The standard renderer for instance provides a number of additional render methods with specific behavior.

Getting Started
---------------

The standard usage is:

* create a paragraph
* add text to the paragraph
* change the paragraph context (to change its properties)
* render the list
* use the created string, e.g. print it to a console or write it to a file


First, create a paragraph.

[source, java]
----------------------------------------------------------------------------------------
AsciiParagraph ap = new AsciiParagraph();
----------------------------------------------------------------------------------------


Next, add text.
Any text can be added, the renderer will process the text (for instance remove excessive white spaces).

[source, java]
----------------------------------------------------------------------------------------
ap.addText("line	1");
ap.addText("2  2");
ap.addText("more text with	tab and \n newline");
ap.addText("some more text to get it over the 80 character default width");
----------------------------------------------------------------------------------------


Next, render the paragraph.
This will provide the text output using the default settings from the paragraph's context.

[source, java]
----------------------------------------------------------------------------------------
String rend = ap.render();
----------------------------------------------------------------------------------------


Finally, print the paragraph to standard out.

[source, java]
----------------------------------------------------------------------------------------
System.out.println(rend);
----------------------------------------------------------------------------------------

The output will be:

----------------------------------------------------------------------------------------
line 1 2 2 more text with tab and newline some more text to get it over  the  80
character default width                                                         

----------------------------------------------------------------------------------------


== Examples

The following examples are using the classic "Lorem Ipsum" text as content.

=== Whitespace handling

The paragraph will remove all additional white spaces so that the resulting text has words separated by 1 space.
All tabulators, line feeds, and carriage returns will be removed.
We can add for instance the following text fragments to a paragraph

----------------------------------------------------------------------------------------
"c2  c2"        // string with 1 extra blank
"c3   c3"       // string with 2 extra blanks
"c4    c4"      // string with 3 extra blanks

"t1	t1"                       // string with a tabulator
"t2		t2"               // string with 2 tabulators
"t3			t3"       // string with 3 tabulators
"t4\t\t\t\tt4"                    // string with 4 escaped tabulators

// a more complex construct using StringUtils to add CR and LF
"word followed by " + StringUtils.CR + " followed by" + StringUtils.LF + " followed by \n"
----------------------------------------------------------------------------------------

Using left alignment and a width of 60 the rendered output will be:

----------------------------------------------------------------------------------------
c2 c2 c3 c3 c4 c4 t1 t1 t2 t2 t3 t3 t4 t4 word followed by 
followed by followed by  

----------------------------------------------------------------------------------------


=== Text alignment

Text can be aligned left and right.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur        Lorem ipsum dolor sit amet, consetetur
sadipscing elitr, sed diam nonumy                  sadipscing elitr, sed diam nonumy
eirmod tempor invidunt ut labore et              eirmod tempor invidunt ut labore et
dolore magna aliquyam erat, sed diam            dolore magna aliquyam erat, sed diam
voluptua. At vero eos et accusam                    voluptua. At vero eos et accusam
----------------------------------------------------------------------------------------


Text can be aligned centered and justified.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur        Lorem ipsum dolor sit amet,  consetetur
   sadipscing elitr, sed diam nonumy          sadipscing  elitr,  sed   diam   nonumy
  eirmod tempor invidunt ut labore et         eirmod tempor  invidunt  ut  labore  et
 dolore magna aliquyam erat, sed diam         dolore magna aliquyam  erat,  sed  diam
   voluptua. At vero eos et accusam           voluptua.  At  vero  eos   et   accusam
----------------------------------------------------------------------------------------

For justified text, the last line will also be justified.
This can lead to rather ugly last lines.
To mitigate this, there are two more formats for justified text: justified with last line left aligned and with last line right aligned.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet,  consetetur        Lorem ipsum dolor sit amet,  consetetur
sadipscing  elitr,  sed   diam   nonumy        sadipscing  elitr,  sed   diam   nonumy
eirmod tempor  invidunt  ut  labore  et        eirmod tempor  invidunt  ut  labore  et
dolore magna aliquyam  erat,  sed  diam        dolore magna aliquyam  erat,  sed  diam
voluptua. At vero eos et accusam                      voluptua. At vero eos et accusam
----------------------------------------------------------------------------------------


=== Text format

Paragraph text can have special formats for first line indentation and hanging paragraph.

----------------------------------------------------------------------------------------
    Lorem  ipsum  dolor  sit  amet,        Lorem   ipsum   dolor   sit   amet,
Lorem   ipsum   dolor   sit   amet,            Lorem  ipsum  dolor  sit  amet,
consetetur  sadipscing  elitr,  sed            consetetur  sadipscing   elitr,
diam nonumy eirmod tempor  invidunt            sed diam nonumy  eirmod  tempor
ut labore et dolore magna  aliquyam            invidunt ut  labore  et  dolore
erat, sed diam  voluptua.  At  vero            magna aliquyam erat,  sed  diam
eos et accusam                                 voluptua.  At   vero   eos   et
                                               accusam                        
----------------------------------------------------------------------------------------

Dropped capital letters are also supported.

----------------------------------------------------------------------------------------
ooooo          orem ipsum dolor sit        #        orem ipsum dolor sit amet,
`888'          amet,     consetetur        #        consetetur      sadipscing
 888           sadipscing    elitr,        #        elitr,  sed  diam   nonumy
 888           sed   diam    nonumy        #        eirmod tempor invidunt  ut
 888           eirmod        tempor        #        labore  et  dolore   magna
 888       o   invidunt  ut  labore        ######   aliquyam  erat,  sed  diam
o888ooooood8   et   dolore    magna                 voluptua. At vero  eos  et
               aliquyam  erat,  sed        accusam                            
diam  voluptua.  At  vero  eos   et
accusam                            
----------------------------------------------------------------------------------------


=== Width

The width of the paragraph can be set in the paragraph context.
The default width is 80.
The width can be changed at any time, it is only applied for rendering.
The width (minus the set padding) must allow for at least 3 characters per line.
The following example shows the same paragraph rendered for a width of 80, 60, and 30.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod 
tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At 
vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,
no sea takimata sanctus est Lorem ipsum dolor sit amet. 

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
diam nonumy eirmod tempor invidunt ut labore et dolore magna
aliquyam erat, sed diam voluptua. At vero eos et accusam et 
justo duo dolores et ea rebum. Stet clita kasd gubergren, no
sea takimata sanctus est Lorem ipsum dolor sit amet. 

Lorem ipsum dolor sit amet, 
consetetur sadipscing elitr, 
sed diam nonumy eirmod tempor 
invidunt ut labore et dolore 
magna aliquyam erat, sed diam 
voluptua. At vero eos et 
accusam et justo duo dolores 
et ea rebum. Stet clita kasd 
gubergren, no sea takimata 
sanctus est Lorem ipsum dolor 
sit amet. 

----------------------------------------------------------------------------------------


=== Indentation (width and character)

A paragraph can have an indentation.
For simple rendering, the indentation is added to the text width (as shown here).
The indentation character can be set separately.
The following example shows a normal paragraph, a paragraph with indentation of 5 using blank, and an indentation of 10 using `'˽'`.
The width is set to 60.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
diam nonumy eirmod tempor invidunt ut labore et dolore magna
aliquyam erat, sed diam voluptua. At vero eos et accusam et 
justo duo dolores et ea rebum. Stet clita kasd gubergren, no
sea takimata sanctus est Lorem ipsum dolor sit amet. 

     Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
     diam nonumy eirmod tempor invidunt ut labore et dolore magna
     aliquyam erat, sed diam voluptua. At vero eos et accusam et 
     justo duo dolores et ea rebum. Stet clita kasd gubergren, no
     sea takimata sanctus est Lorem ipsum dolor sit amet. 

˽˽˽˽˽˽˽˽˽˽Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
˽˽˽˽˽˽˽˽˽˽diam nonumy eirmod tempor invidunt ut labore et dolore magna
˽˽˽˽˽˽˽˽˽˽aliquyam erat, sed diam voluptua. At vero eos et accusam et 
˽˽˽˽˽˽˽˽˽˽justo duo dolores et ea rebum. Stet clita kasd gubergren, no
˽˽˽˽˽˽˽˽˽˽sea takimata sanctus est Lorem ipsum dolor sit amet. 

----------------------------------------------------------------------------------------


=== Left padding (width and character)

A paragraph can have a left padding (at the start of each line).
For simple rendering, the padding is added to the text width (as shown here).
The left padding character can be set separately.
The following example shows a normal paragraph, a paragraph with left padding of 10 using blank, and a left padding of 10 using `'-'`.
The width is set to 60.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
diam nonumy eirmod tempor invidunt ut labore et dolore magna
aliquyam erat, sed diam voluptua. At vero eos et accusam et 
justo duo dolores et ea rebum. Stet clita kasd gubergren, no
sea takimata sanctus est Lorem ipsum dolor sit amet. 

          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
          diam nonumy eirmod tempor invidunt ut labore et dolore magna
          aliquyam erat, sed diam voluptua. At vero eos et accusam et 
          justo duo dolores et ea rebum. Stet clita kasd gubergren, no
          sea takimata sanctus est Lorem ipsum dolor sit amet. 

--------------------Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
--------------------diam nonumy eirmod tempor invidunt ut labore et dolore magna
--------------------aliquyam erat, sed diam voluptua. At vero eos et accusam et 
--------------------justo duo dolores et ea rebum. Stet clita kasd gubergren, no
--------------------sea takimata sanctus est Lorem ipsum dolor sit amet. 
----------------------------------------------------------------------------------------


=== Right padding (width and character)

A paragraph can have a right padding (at the end of each line).
For simple rendering, the padding is added to the text width (as shown here).
The right padding character can be set separately.
The following example shows a justified paragraph and then the same paragraph with right padding of 20 using `'+'`.
The width is set to 60.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed
diam nonumy eirmod tempor invidunt ut labore et dolore magna
aliquyam erat, sed diam voluptua. At vero eos et accusam  et
justo duo dolores et ea rebum. Stet clita kasd gubergren, no
sea  takimata  sanctus  est  Lorem  ipsum  dolor  sit  amet.

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed++++++++++++++++++++
diam nonumy eirmod tempor invidunt ut labore et dolore magna++++++++++++++++++++
aliquyam erat, sed diam voluptua. At vero eos et accusam  et++++++++++++++++++++
justo duo dolores et ea rebum. Stet clita kasd gubergren, no++++++++++++++++++++
sea  takimata  sanctus  est  Lorem  ipsum  dolor  sit  amet.++++++++++++++++++++
----------------------------------------------------------------------------------------


=== Extra text at each line start and line end

Beside indentation and padding, each line of the resulting paragraph can also be started and/or terminated with a particular string.
Those strings are called line start and line end.
For simple rendering, these strings is added to the text width (as shown here).

The following example shows a justified paragraph, then same paragraph with start string `"// "`, then same paragraph with end string `" -->"`

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur  sadipscing
elitr, sed diam nonumy eirmod tempor  invidunt  ut
labore et dolore magna  aliquyam  erat,  sed  diam
voluptua.    At    vero     eos     et     accusam

// Lorem ipsum dolor sit amet, consetetur  sadipscing
// elitr, sed diam nonumy eirmod tempor  invidunt  ut
// labore et dolore magna  aliquyam  erat,  sed  diam
// voluptua.    At    vero     eos     et     accusam

// Lorem ipsum dolor sit amet, consetetur  sadipscing -->
// elitr, sed diam nonumy eirmod tempor  invidunt  ut -->
// labore et dolore magna  aliquyam  erat,  sed  diam -->
// voluptua.    At    vero     eos     et     accusam -->

----------------------------------------------------------------------------------------


=== Render to maximum width, calculating additional padding and strings

Setting an indentation and line start/end strings does not impact the width of the paragraph text.
However, sometimes it is useful to actually render inclusive, using indentation and the length of the line start/end strings.
This is proivded be the standard renderer.

The following example shows how subsequently adding indentation, start string, and end string changes the text width but maintains the overall line width.

----------------------------------------------------------------------------------------
Lorem ipsum dolor sit amet, consetetur  sadipscing
elitr, sed diam nonumy eirmod tempor  invidunt  ut
labore et dolore magna  aliquyam  erat,  sed  diam
voluptua. At vero eos et accusam                  

// Lorem  ipsum   dolor   sit   amet,   consetetur
// sadipscing elitr, sed diam nonumy eirmod tempor
// invidunt ut labore  et  dolore  magna  aliquyam
// erat, sed diam voluptua. At vero eos et accusam

// Lorem  ipsum  dolor  sit  amet,  consetetur -->
// sadipscing elitr, sed  diam  nonumy  eirmod -->
// tempor invidunt ut labore et  dolore  magna -->
// aliquyam erat, sed diam voluptua.  At  vero -->
// eos et accusam                              -->

//           Lorem  ipsum  dolor   sit   amet, -->
//           consetetur sadipscing elitr,  sed -->
//           diam   nonumy    eirmod    tempor -->
//           invidunt  ut  labore  et   dolore -->
//           magna  aliquyam  erat,  sed  diam -->
//           voluptua. At vero eos et accusam  -->

----------------------------------------------------------------------------------------


=== Conditional line breaks

All excessive white space characters are removed.
Conditional line breaks can be added using using the HTML entities `<br>` or `<br/>`.
For instance, the text

----------------------------------------------------------------------------------------
"line 1<br>"
"line 2<br/>"
"line three \n still line three"
----------------------------------------------------------------------------------------

will render to

----------------------------------------------------------------------------------------
line 1                             
line 2                             
line three still line three        

----------------------------------------------------------------------------------------



